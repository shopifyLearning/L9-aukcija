<!--  Check if the customer object is empty -->
{% if customer %}
  <!-- If customer object is not empty display the navigation bar with the customer's name and links -->
  <nav style="background-color: {{ section.settings.background_color_header }}; " class="header-nav">
    <div>
      <a href="/">
        <img
          width="80"
          height="50"
          loading="lazy"
          src="{{ 'logo.jpg' | asset_url }}">
      </a>
    </div>

    <div class="middle-nav-links">
      <span class="hamburger-icon" onclick="toggleDrawer()">&#9776;</span>
      <ul class="middle-nav-list">
        {% for link in section.settings.menu.links %}
          <li style="color: {{ section.settings.color_menu_text }}">
            {{ link.title | link_to: link.url }}
          </li>
        {% endfor %}
      </ul>
    </div>
    <div class="right-nav-items">
      <form action="/search">
        <input
          class="search-nav"
          placeholder="Search"
          type="search"
          name="q">
      </form>

      <a href="/cart">
        <img
          class="shopping-img"
          width="40"
          height="40"
          loading="lazy"
          src="{{ 'shopping-cart.png' | asset_url }}">
      </a>
    </div>
  </nav>

  <div
    id="drawerMenu"
    class="drawer-menu"
    style="background-color: {{ section.settings.background_color_header }}; ">
    <ul>
      {% for link in section.settings.menu.links %}
        <li>
          <a href="{{ link.url }}" style="color: {{ section.settings.color_menu_text }}">{{ link.title }}</a>
        </li>
      {% endfor %}
    </ul>
  </div>
{% else %}
  <div>
    <!-- If customer object is empty display a message to log in -->
    <p>Please <a href="/account/login">log in</a> to view the navigation bar.</p>
  </div>
{% endif %}

<script>
    function toggleDrawer() {
        var drawer = document.getElementById('drawerMenu');
        drawer.classList.toggle('open');
    }
  
    document.addEventListener('click', function(event) {
        var drawer = document.getElementById('drawerMenu');
        var hamburger = document.querySelector('.hamburger-icon');
        if (!drawer.contains(event.target) && !hamburger.contains(event.target)) {
            drawer.classList.remove('open');
        }
    });
  
    let touchStartX = 0;
    let touchEndX = 0;
  
    document.addEventListener('touchstart', function(event) {
        touchStartX = event.changedTouches[0].screenX;
    });
  
    document.addEventListener('touchend', function(event) {
        touchEndX = event.changedTouches[0].screenX;
        handleGesture();
    });
  
    function handleGesture() {
        if (touchEndX > touchStartX + 50) { // Swipe right threshold
            var drawer = document.getElementById('drawerMenu');
            drawer.classList.remove('open');
        }
    }
</script>

{% schema %}
  {
    "name": "Navigation bar",
    "settings": [
      {
        "type": "color",
        "id": "background_color_header",
        "label": "Navigation Bar Color Picker"
      }, {
        "type": "link_list",
        "id": "menu",
        "label": "Choose menu",
        "default": "main-menu"

      }, {
        "type": "color",
        "id": "color_menu_text",
        "label": "Main Menu Text Color Picker"
      }

    ],
    "blocks": [],
    "presets": [
      {
        "name": "Navigation bar"
      }
    ]
  }
{% endschema %}