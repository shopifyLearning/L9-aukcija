<section class="contact">
  <div class="contact-form">
  {% form 'create_customer' %}
    {{ form.errors | default_errors }}

    <div> 
      <div>
        <label for="first-name">First name</label>
        <input type="text" name="customer[first_name]" id="first-name">
      </div>

      <div>
        <label for="last-name">Last name</label>
        <input type="text" name="customer[last_name]" id="last-name">
      </div>

      <div>
        <label for="email">Email</label>
        <input type="email" name="customer[email]" id="email" onfocus="hideTooltip('email-tooltip')">
        <!-- Email validation tooltip -->
        <span id="email-tooltip" class="tooltip" style="display: none;">Valid Levi9 email addresses can be used only.</span>
      </div>

      <div>
        <label for="password">Password</label>
        <input type="password" name="customer[password]" id="password" onfocus="hideTooltip('password-tooltip')">
        <!-- Password validation tooltip -->
        <span id="password-tooltip" class="tooltip" style="display: none;">Password is too short (minimum is 5 characters).</span>
      </div>

      <div>
        <!-- Submit button with validation function -->
        <input type="submit" value="Create" onclick="return validateForm()">
      </div>
    </div>
  {% endform %}
  </div>
</section>

<script>
  // Function to validate the form inputs
  function validateForm() {
    // Get the email value and convert it to lowercase
    var email = document.getElementById('email').value.toLowerCase();
    // Get the password value
    var password = document.getElementById('password').value;
    // Regular expression pattern for validating email format
    var emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    // Extract the domain part of the email
    var domain = email.substring(email.lastIndexOf("@") + 1);
    // Get the tooltip elements for email and password
    var emailTooltip = document.getElementById('email-tooltip');
    var passwordTooltip = document.getElementById('password-tooltip');
    
    // Reset tooltips
    emailTooltip.style.display = 'none';
    passwordTooltip.style.display = 'none';

    var valid = true;

    // Validate the email format and domain
    if (!emailPattern.test(email) || domain !== 'levi9.com') {
      // Show the email tooltip if validation fails
      emailTooltip.style.display = 'inline';
      valid = false;
    }

    // Validate the password length
    if (password.length < 5) {
      // Show the password tooltip if validation fails
      passwordTooltip.style.display = 'inline';  // Show the password tooltip
      valid = false;
    }

    return valid;  // Return false if any validation fails
  }

  function hideTooltip(tooltipId) {
    document.getElementById(tooltipId).style.display = 'none';  // Hide tooltip on focus
  }
</script>

<style>
  .tooltip {
    color: red; 
    font-size: 12px; 
    margin-left: 5px; 
  }
</style>

{% schema %}
  {
    "name": "Register"
  }
{% endschema %}
